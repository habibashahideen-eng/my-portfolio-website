<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ultimate Quiz App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #007acc;
      color: white;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      overflow-x: hidden;
    }
    button:active {
      transform: scale(0.95);
      transition: transform 0.1s ease;
    }
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: -1;
      top: 0;
      left: 0;
    }
    .animate-timer {
      animation: shrink 10s linear forwards;
    }
    @keyframes shrink {
      from { width: 100%; }
      to { width: 0%; }
    }

    /* Question Counter Box Style */
    #question-counter {
      background-color: #007acc; /* Match body bg */
      font-weight: 700;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 0.375rem; /* Tailwind rounded */
      user-select: none;
      width: 4.5rem;
      text-align: center;
    }

    /* Screen shake animation */
@keyframes shake {
  0% { transform: translate(1px, 1px) rotate(0deg); }
  10% { transform: translate(-1px, -2px) rotate(-1deg); }
  20% { transform: translate(-3px, 0px) rotate(1deg); }
  30% { transform: translate(3px, 2px) rotate(0deg); }
  40% { transform: translate(1px, -1px) rotate(1deg); }
  50% { transform: translate(-1px, 2px) rotate(-1deg); }
  60% { transform: translate(-3px, 1px) rotate(0deg); }
  70% { transform: translate(3px, 1px) rotate(-1deg); }
  80% { transform: translate(-1px, -1px) rotate(1deg); }
  90% { transform: translate(1px, 2px) rotate(0deg); }
  100% { transform: translate(1px, -2px) rotate(-1deg); }
}

/* Smooth width transition */
.seconds_bar_inner {
  transition: width 1s linear;
  background: #38bdf8; /* bright blue */
}

    .shake {
      animation: shake 0.5s;
    }

    /* Large TIME UP overlay */
    #time-up-overlay {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 5rem;
      font-weight: 900;
      color: #ff4444;
      text-shadow: 0 0 10px #ff0000;
      pointer-events: none;
      user-select: none;
      z-index: 9999;
      display: none;
    }

    #timer {
  background: #10b981; /* Emerald green */
  color: white;
  font-weight: 700;
  padding: 0.25rem 1rem;
  border-radius: 9999px; /* full pill */
  min-width: 3.5rem;
  text-align: center;
  user-select: none;
  box-shadow: 0 0 8px #10b981aa;
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
}

/* When timer is urgent (5 seconds or less) */
#timer.urgent {
  background: #ef4444; /* Red */
  box-shadow: 0 0 12px #ef4444cc;
  animation: pulse 1.5s infinite;
}

/* Pulse animation */
@keyframes pulse {
  0%, 100% {
    box-shadow: 0 0 12px #ef4444cc;
  }
  50% {
    box-shadow: 0 0 24px #ef4444ff;
  }
}

@keyframes shake {
  0% { transform: translate(0, 0); }
  20% { transform: translate(-10px, 0); }
  40% { transform: translate(10px, 0); }
  60% { transform: translate(-10px, 0); }
  80% { transform: translate(10px, 0); }
  100% { transform: translate(0, 0); }
}

.shake {
  animation: shake 0.5s ease;
}



  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4 relative">

  <div id="particles-js"></div>

  <div class="w-full max-w-xl space-y-6 z-10">
    <!-- Start Screen -->
    <div id="start-screen" class="text-center space-y-4">
      <h1 class="text-3xl font-bold">üéì Ultimate Quiz Challenge</h1>
      <input type="text" id="username" placeholder="Enter your name" class="w-full p-2 rounded text-black" />
      <div class="flex justify-center gap-4">
        <button id="start-btn" class="bg-blue-900 hover:bg-blue-950 text-white px-6 py-2 rounded">Start Quiz</button>
        <button id="music-toggle" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">üîà Music</button>
      </div>

      <button 
        onclick="window.location.href='projects.html'" 
        class="bg-purple-900 hover:bg-purple-800 text-white px-6 py-2 rounded" style="margin-top: 40px; margin-bottom: -90px;">
        ‚Üê Back to Project
      </button>
    </div>

    <!-- Quiz Screen -->
    <div id="quiz-screen" class="hidden space-y-4">
      <div class="flex justify-between items-center">
        <div id="question-counter">1/10</div> <!-- Question Counter Box -->

        <div class="w-full bg-gray-700 rounded-full h-3 mx-4 overflow-hidden">
          <div id="progress-bar" class="h-full bg-green-500 transition-all duration-500" style="width: 0%"></div>
        </div>
        <div id="timer" class="ml-4 text-sm font-bold"></div>
      </div>

      <div id="question-box" class="bg-gray-800 p-4 rounded-lg shadow-lg transition-all"></div>
      <div id="answers" class="grid grid-cols-1 gap-4"></div>
      <div id="feedback" class="text-center text-xl font-bold"></div>
    </div>

    <!-- End Screen -->
    <div id="end-screen" class="hidden text-center space-y-4">
      <h2 class="text-2xl font-bold">üéâ Quiz Complete!</h2>
      <p id="final-score"></p>
      <button id="restart-btn" class="bg-blue-700 hover:bg-blue-900 text-white px-6 py-2 rounded">Play Again</button>

      <div id="leaderboard" class="mt-6 text-left">
        <h3 class="text-lg font-bold mb-2">üèÜ Leaderboard</h3>
        <ul id="leaderboard-list" class="space-y-1"></ul>
      </div>
    </div>
  </div>

  <!-- TIME UP overlay -->
  <div id="time-up-overlay">TIME UP!</div>

  <!-- Audio Files (reliable sources) -->
  <audio id="correct-sound" src="https://www.soundjay.com/buttons/sounds/button-4.mp3" preload="auto"></audio>
  <audio id="wrong-sound" src="https://www.soundjay.com/buttons/sounds/button-10.mp3" preload="auto"></audio>
  <audio id="timeout-sound" src="https://www.soundjay.com/button/beep-07.wav" preload="auto"></audio>
  <audio id="background-music" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" loop preload="auto"></audio>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    const questions = [
      {
        question: "Which planet is known as the Red Planet?",
        answers: ["Venus", "Mars", "Jupiter", "Mercury"],
        correct: "Mars",
      },
      {
        question: "What is the capital city of Azerbaijan?",
        answers: ["Toronto", "Vancouver", "Montreal", "Baku"],
        correct: "Baku",
      },
      {
        question: "Which element has the chemical symbol 'O'?",
        answers: ["Osmium", "Oxygen", "Gold", "Iron"],
        correct: "Oxygen",
      },
      {
        question: "Who invented the lightbulb?",
        answers: ["Thomas Edison", "Albert Einstein", "Isaac Newton", "Nikola Tesla"],
        correct: "Thomas Edison",
      },
      {
        question: "Which animal is known as the King of the Jungle?",
        answers: ["Tiger", "Elephant", "Lion", "Bear"],
        correct: "Lion",
      },
      {
        question: "What is the hardest natural substance on Earth?",
        answers: ["Gold", "Iron", "Diamond", "Quartz"],
        correct: "Diamond",
      },
      {
        question: "What year did World War II end?",
        answers: ["1940", "1945", "1939", "1950"],
        correct: "1945",
      },
      {
        question: "Which programming language is known for web development?",
        answers: ["C++", "Python", "JavaScript", "Swift"],
        correct: "JavaScript",
      },
      {
        question: "Which famous structure is in Paris?",
        answers: ["Colosseum", "Eiffel Tower", "Big Ben", "Leaning Tower of Pisa"],
        correct: "Eiffel Tower",
      },
      {
        question: "Which gas do plants use for photosynthesis?",
        answers: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Hydrogen"],
        correct: "Carbon Dioxide",
      },
    ];

    const startBtn = document.getElementById("start-btn");
    const restartBtn = document.getElementById("restart-btn");
    const musicToggle = document.getElementById("music-toggle");
    const startScreen = document.getElementById("start-screen");
    const quizScreen = document.getElementById("quiz-screen");
    const endScreen = document.getElementById("end-screen");
    const questionBox = document.getElementById("question-box");
    const answersContainer = document.getElementById("answers");
    const feedback = document.getElementById("feedback");
    const progressBar = document.getElementById("progress-bar");
    const timerDisplay = document.getElementById("timer");
    const usernameInput = document.getElementById("username");
    const finalScoreText = document.getElementById("final-score");
    const leaderboardList = document.getElementById("leaderboard-list");
    const questionCounter = document.getElementById("question-counter");
    const timeUpOverlay = document.getElementById("time-up-overlay");

    // Sounds
    const correctSound = document.getElementById("correct-sound");
    const wrongSound = document.getElementById("wrong-sound");
    const timeoutSound = document.getElementById("timeout-sound");
    const backgroundMusic = document.getElementById("background-music");

    // Variables
    let currentQuestionIndex = 0;
    let score = 0;
    let timer;
    let timerWidth = 100; // percentage
    let username = "";

    // Initialize Particles.js
    particlesJS.load('particles-js', null, function() {
      console.log('Particles.js loaded.');
    });
    particlesJS('particles-js', {
      particles: {
        number: { value: 50 },
        color: { value: '#ffffff' },
        shape: { type: 'circle' },
        opacity: { value: 0.5 },
        size: { value: 3 },
        move: { enable: true, speed: 2 }
      }
    });

    // Functions

    function startQuiz() {
      username = usernameInput.value.trim();
      if (!username) {
        alert("Please enter your name to start the quiz.");
        return;
      }

      score = 0;
      currentQuestionIndex = 0;
      updateQuestionCounter();
      startScreen.classList.add("hidden");
      endScreen.classList.add("hidden");
      quizScreen.classList.remove("hidden");
      backgroundMusic.play();
      loadQuestion();
      startTimer();
      updateProgressBar();
      feedback.textContent = "";
    }

    function loadQuestion() {
      clearFeedback();
      const q = questions[currentQuestionIndex];
      questionBox.textContent = q.question;
      answersContainer.innerHTML = "";
      q.answers.forEach(answer => {
        const btn = document.createElement("button");
        btn.className = "bg-blue-700 hover:bg-blue-900 p-3 rounded text-white font-semibold transition-colors";
        btn.textContent = answer;
        btn.onclick = () => checkAnswer(answer, btn);
        answersContainer.appendChild(btn);
      });
    }

    function checkAnswer(selected, btn) {
      stopTimer();

      const correctAnswer = questions[currentQuestionIndex].correct;
      const buttons = answersContainer.querySelectorAll("button");

      if (selected === correctAnswer) {
        score++;
        feedback.textContent = "Correct!";
        feedback.style.color = "limegreen";
        correctSound.play();
        btn.classList.add("bg-green-600");
        confetti({
          particleCount: 100,
          spread: 70,
          origin: { y: 0.6 }
        });
      } else {
        feedback.textContent = `Wrong! Correct answer: ${correctAnswer}`;
        feedback.style.color = "#ff4444";
        wrongSound.play();
        btn.classList.add("bg-red-600", "line-through");

        // Highlight correct answer button
        buttons.forEach(button => {
          if (button.textContent === correctAnswer) {
            button.classList.add("bg-green-600", "border-4", "border-green-300");
          }
          button.disabled = true;
        });

        // Add shake animation to question box
        questionBox.classList.add("shake");
        setTimeout(() => questionBox.classList.remove("shake"), 500);
      }

      disableAnswerButtons();
      setTimeout(nextQuestion, 1500);
      updateProgressBar();
    }

    function disableAnswerButtons() {
      const buttons = answersContainer.querySelectorAll("button");
      buttons.forEach(button => {
        button.disabled = true;
      });
    }

    function nextQuestion() {
      currentQuestionIndex++;
      if (currentQuestionIndex >= questions.length) {
        endQuiz();
      } else {
        updateQuestionCounter();
        loadQuestion();
        startTimer();
      }
    }

    function updateQuestionCounter() {
      questionCounter.textContent = `${currentQuestionIndex + 1}/${questions.length}`;
    }

    function updateProgressBar() {
      const progressPercent = ((currentQuestionIndex) / questions.length) * 100;
      progressBar.style.width = progressPercent + "%";
    }

    function endQuiz() {
      quizScreen.classList.add("hidden");
      endScreen.classList.remove("hidden");
      finalScoreText.textContent = `${username}, your score is ${score} out of ${questions.length}`;
      saveScore();
      renderLeaderboard();
    }
// timer //
   function startTimer() {
  let timeLeft = 10;
  let timerWidth = 100;

  timerDisplay.textContent = timeLeft + "s";
  timerDisplay.style.width = "100%";
  timerDisplay.style.backgroundColor = "#22c55e";
  timerDisplay.classList.remove("animate-timer");

  progressBar.style.width = (currentQuestionIndex / questions.length) * 100 + "%";

  timer = setInterval(() => {
    timeLeft--;
    timerWidth -= 10;
    timerDisplay.textContent = timeLeft + "s";
    timerDisplay.style.width = timerWidth + "%";

    if (timeLeft <= 0) {
      clearInterval(timer);
      timerDisplay.textContent = "0s";
      timerDisplay.style.width = "0%";

      timeoutSound.play();
      showTimeUpOverlay();
      handleTimeout();

      const container = document.getElementById("quiz-screen");
      container.classList.add("shake");

      setTimeout(() => {
        container.classList.remove("shake");
      }, 500);
    }
  }, 1000);
}

// OUTSIDE startTimer, define these:
function stopTimer() {
  clearInterval(timer);
  timerDisplay.classList.remove("animate-timer");
  timeUpOverlay.style.display = "none";
}

function handleTimeout() {
  feedback.textContent = `Time's up! Correct answer: ${questions[currentQuestionIndex].correct}`;
  feedback.style.color = "#ff4444";
  disableAnswerButtons();

  const buttons = answersContainer.querySelectorAll("button");
  buttons.forEach(button => {
    if (button.textContent === questions[currentQuestionIndex].correct) {
      button.classList.add("bg-green-600", "border-4", "border-green-300");
    }
    button.disabled = true;
  });

  setTimeout(() => {
    timeUpOverlay.style.display = "none";
    nextQuestion();
  }, 1500);
}

function showTimeUpOverlay() {
  timeUpOverlay.style.display = "block";
}

function clearFeedback() {
  feedback.textContent = "";
}


    // Leaderboard localStorage
    function saveScore() {
      const leaderboard = JSON.parse(localStorage.getItem("quizLeaderboard")) || [];
      leaderboard.push({ name: username, score });
      leaderboard.sort((a, b) => b.score - a.score);
      if (leaderboard.length > 10) leaderboard.pop();
      localStorage.setItem("quizLeaderboard", JSON.stringify(leaderboard));
    }

    function renderLeaderboard() {
      const leaderboard = JSON.parse(localStorage.getItem("quizLeaderboard")) || [];
      leaderboardList.innerHTML = "";
      leaderboard.forEach((entry, i) => {
        const li = document.createElement("li");
        li.textContent = `${i + 1}. ${entry.name} - ${entry.score}`;
        leaderboardList.appendChild(li);
      });
    }

    // Event listeners
    startBtn.addEventListener("click", startQuiz);
    restartBtn.addEventListener("click", () => {
      endScreen.classList.add("hidden");
      startScreen.classList.remove("hidden");
      feedback.textContent = "";
    });

    musicToggle.addEventListener("click", () => {
      if (backgroundMusic.paused) {
        backgroundMusic.play();
        musicToggle.textContent = "üîä Music";
      } else {
        backgroundMusic.pause();
        musicToggle.textContent = "üîà Music";
      }
    });

    // Disable right click on answers container (optional)
    answersContainer.addEventListener("contextmenu", e => e.preventDefault());

    // Initial leaderboard render
    renderLeaderboard();





  </script>
</body>
</html>